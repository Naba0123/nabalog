{"componentChunkName":"component---src-templates-blog-post-js","path":"/2019/1109/","result":{"data":{"site":{"siteMetadata":{"title":"なばろぐ","description":"プログラミング、ピアノ作曲・演奏、雑記など"}},"markdownRemark":{"html":"<div class=\"alert info\">\nはてなブログからの移行記事\n</div>\n<h1>はじめに</h1>\n<p>この記事では、Windows 10 上の Docker で立ち上げた Selenium Server に対して、WSL (Windows Subsystem for Linux) 上で Python スクリプトを書いて Web スクレイピング環境を構築する手順を説明します。</p>\n<h2>免責</h2>\n<p>Web スクレイピングは法的にも関わってくるため、利用する際には対象の Web サイトの利用規約等を把握した上で自己責任で行ってください。<br>\nWeb スクレイピングについては、Wikipedia のリンクを貼っておきます。（<a href=\"https://ja.wikipedia.org/wiki/%E3%82%A6%E3%82%A7%E3%83%96%E3%82%B9%E3%82%AF%E3%83%AC%E3%82%A4%E3%83%94%E3%83%B3%E3%82%B0\">https://ja.wikipedia.org/wiki/%E3%82%A6%E3%82%A7%E3%83%96%E3%82%B9%E3%82%AF%E3%83%AC%E3%82%A4%E3%83%94%E3%83%B3%E3%82%B0</a>）</p>\n<h2>環境</h2>\n<ul>\n<li>\n<p>Windows 10 Pro 1903 (Windows 10 May 2019 Update)</p>\n<ul>\n<li>Docker for Windows 2.1.0.4<br>\n<figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 82.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAADcUlEQVQ4y32US28URxDH5xNEyoETp+SQS6RIWCSB2CZgzMNghHiIR4CQKKBckkty4RvADQlFCCXB2Owas9ixje1AxCHJHSmKiIIEcfbh3ZmdffTO7Ez3zPTO40/1jF9caO1P1V1d/a+q7t3V/izbMFgXrGOjTTSZBdsVcEUAR/hvpEu4ynI1D8BsF9q5eQunHwqcmOU485CY5zi7IHBu0cOFJQ/nlzKruPjr63xBnF8UOEVnVNzFJQ7to9ttfPe7j6nnEl8+ErhAASro5BzHgQLH4WmOQ9PZfNekm/IpMZh38fGEgw/HuzR3yM8xkOtCG5xo43sSvPlXQBUKXCLRrx6pCgWOU9XKKv8JSrD/Psc+Yvekg53jFgYmGI486GLnWAv7C1TpHLU8nGfoz3NsH3fSzLtWsyurDh98kLF3yk0ZJt+OOwzbbhm4tGjjyh+CxDsYKTj45okHbSjH6IDA6EyWfU1ErUfIDm0SUqh5/10LH9zUMVqw8fVvHg5PMRyY6uLMHLW8hwSPzgpcfkyi05nYZ/Qo6qGOzfJ1oUyMY8896iBnY8dYG31U5bdPOI7/4qDvZ4Yt10rQ9lLLozN0ZwtivapT82K9mn2rYqrSg4Us2ch9G0P36IrusvTR3vvBxNtXK9h63VCPwjBAd/hJzkF/zqW5m1p1j4OT2Vrd5xFK9jl9NS4/9rA7b2P7mIV3b9Txzg0Tb12r4f2fLBydoUd5WhV41ozxrJXgn1XU+u9GlKL8zxlQ7AL/WQlesAgLLwM8NXoYvl1G348N5P+VeNGJ8ZKF0BAFABKgJ5BIIuBALLE2esJB6BE++cMAmweXMSp2tMkTQwtkD812B3WzAd0wYTaa6c8wydLg//IKVqo6arqR7lm2DbvrgHsb4mGcgD4IowhaFIYoVSowDCOl2SRBxuAH2YEqCem6Tslov15Ho9GAEAJSyjRhREpJkqSxkRJUG5wCPML3PQSEJDHlV0PKgHzZngw8hFTAxkhes3FMgr7vpwubCrII5lHpycYRt5f5FR1i7cYiiul4McXHaPGY5glkSIJrGSVFBlFmZS+E53lplQ79LVmuj46r/qJUN9QFdRAEcj3eJ4lenCXSTNNEq9VErVqFoddQq1VRKZdRLBZRKpVQLhWJUkp1pYLl5eXMTzEqXq8pqjDNOtrtNl4B9N5/yBb/sIYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"20191109093621\"\n        title=\"20191109093621\"\n        src=\"/static/cca8269a0004049dd01cdf9f45b06650/5a46d/20191109093621.png\"\n        srcset=\"/static/cca8269a0004049dd01cdf9f45b06650/1db73/20191109093621.png 75w,\n/static/cca8269a0004049dd01cdf9f45b06650/8a4e8/20191109093621.png 150w,\n/static/cca8269a0004049dd01cdf9f45b06650/5a46d/20191109093621.png 300w,\n/static/cca8269a0004049dd01cdf9f45b06650/fc2a6/20191109093621.png 450w,\n/static/cca8269a0004049dd01cdf9f45b06650/a76f4/20191109093621.png 586w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">20191109093621</figcaption>\n  </figure></li>\n<li>WSL</li>\n<li>Ubuntu 18.04 LTS</li>\n<li>Python 3.6.8</li>\n<li>UltraVNC Viewer 1.1.24 (動作確認用)</li>\n</ul>\n</li>\n</ul>\n<h1>Selenium Server (Docker) の準備</h1>\n<p>Docker のインストールは省略します。</p>\n<h2>コンテナ起動</h2>\n<p>Windows 上で docker コマンドが使えるところで、以下を実行してコンテナを起動します。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ docker run -d -p 4444:4444 -p 5900:5900 selenium/standalone-chrome-debug:latest\n7ef4267bba50ec1b80361325f10560502d8162c59acbc4688d34f26192154ec9</code></pre></div>\n<p><strong>docker ps</strong> を叩き、コンテナが起動していることを確認します。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ docker ps\nCONTAINER ID        IMAGE                                     COMMAND                  CREATED             STATUS              PORTS                                            NAMES\n7ef4267bba50        selenium/standalone-chrome-debug:latest   &quot;/opt/bin/entry_poin…&quot;   16 seconds ago      Up 15 seconds       0.0.0.0:4444-&gt;4444/tcp, 0.0.0.0:5900-&gt;5900/tcp   mystifying_williams</code></pre></div>\n<p>今回使用している Docker イメージは、Selenium 公式のもののうちの <strong>standalone-chrome-debug</strong> で、Selenium Server や、特定のバージョンの Chrome インストールされています。<br>\n<strong>-debug</strong> がついているものは、VNCサーバーがついているようです。</p>\n<p>また、Docker のポートフォワード機能で、以下を設定しています。</p>\n<ul>\n<li>\n<p>4444 : Selenium サーバー</p>\n<ul>\n<li>Python スクリプトから Remote サーバーとして指定するために必要になります</li>\n</ul>\n</li>\n<li>\n<p>5900 : VNC サーバー</p>\n<ul>\n<li>Windows 上から UltraVNC Viewer を介してコンテナ内の Chrome の動作を確認するのに必要になります</li>\n</ul>\n</li>\n</ul>\n<p>このあたりの詳細は、GitHub を参考にしてください。\n<a href=\"https://github.com/SeleniumHQ/docker-selenium\">https://github.com/SeleniumHQ/docker-selenium</a></p>\n<h2>VNC クライアントで Docker へ接続</h2>\n<p>VNC クライアントを使用することで、 Docker 内で実際にどのようにスクレイピングが行われているのか、<br>\n実際の Docker 内の Chrome の画面を見ながら開発を行うことができます。</p>\n<p>今回は、UltraVNC Viewer というソフトウェアを使用します。\n<a href=\"https://www.uvnc.com/\">https://www.uvnc.com/</a></p>\n<p>インストール方法は割愛します。</p>\n<p>起動して、ホスト名に <strong>localhost:5900</strong> を指定して、「Connect」を押下します。<br>\n<figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 108%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAAEIklEQVQ4y21UyY7cVBT1ArYgkLLnD/gHPoItOxasQgChMIQOCKLwC0gsYIMELGDRojt0hk531+gqu1weq1wuj+WyXVMPqopEcrj3dhdKIhZHz28699zz7rVy7esx3rqT4M3bHl7b8fA6QfnUxhs7Ll65aUO5YUL52Lwcr/dfxIfmFSyam3j1Mzr/3i/38e7Pv+HOfoi792Lc3Y/w3V6EL3YTfPB7jPd/jQQf/Zngq70MX/51iVuEz3dT3NqNcHt3jG/3E3x/kEL55KfreGfnbVRTH3kwQDywsEiG2OtP6WKOb+5NcXM3x3FwDuAZnj19SgPjH6w3T1BOc8wTH9isgPUKyh+NA/x4/wdESYq8qDAtK5SzhXx3NQOaruO41oJh2tD6NtSuAZXW/TBBMV9hNl9gPp9jsVhitVxCSSdLJH4Cs2+i3VYRRjHOzs6wWq3k4Hw2Q1WW9D2jSwuUZSHgvdVyAS8uofk5+uMC7WEOZRhlaDZr6HY1RETGUSzLRN8wYRh99CmQYzswegZ0vYeCyE9PT4X8bLVEy8tweFzHgwcPsd+kRwknFTzXQ6ejwfMGctDo6Tg54SA6ffcoYEvQ1TTMZnMsKSifOyVCKyzQciKoTogTO4ES5TME/oi8MlDNOK05giBAo96gIF24FEwnH5uNFoZDH+fn50LGYOLpdIqO1sNRrQl34F8S+sMhavW6pDSZTESV6zhE2kSDlA0GA+hkCe97nvefQkZVlQhGI1p3kaYpE1ZE6KPRaFJabYloWTaGRHJ8dARV7YhK0zTRUbtIs0webEsoqZOn24cUwsD36YU7GAdjOeDLvI06qXbJV9exJf04Tl5QJ6A5kzEp70nK4XgMlS5omk4+VqTQgkYpchmZJn3TYzikki9uwWq2Hg7JstEoELtE4Zg8cByX4CCKY1ISw7ZtStWV0gkoIPvD/jF4PcsmQhyFIR49fIRarSGZSdlMspRUhoiTBJM8R1kUEjGKInnZjCJXFQUmYl7ji+zlZYcscHFxIRAPmTAlIo4YUjQmyvMpCkoloXZkZbzGpcQB0zQTZdvy4X22yDAMSV08HJEKnepQJw9bVCbsG/vK3cGpDwZD2WNLeK+gDFZX/rFiPtOjUhNCVsh1xJcsOmz2+7DoQJ4X2Gw2WK/Xgs2TDc3XssbqGJzijJrh+bkQLqjx2Q/elB/C1XdJfcvebcHKGLz+f+A7ih9P0NM1HPx9gHarhcPDx4I6td52rrbaeEyjT5mwlyManwevsR1SNuGE2IsppZiLJwze4Dmr2Y68nl/ts5KXwS3IWSijJKcOCeSF+cWkNMLo6sVH0h2sgD1mKzIqF5W6ih+Be577W1VVGOR9UZRQgrSQ4rTpn8evZFHPsnzHdqV/ueD5Fbk0WAGXF3dOT8h0Gg2ZcwNwJv8CecESdfT5/24AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"20191109112844\"\n        title=\"20191109112844\"\n        src=\"/static/4ffb676ad07aef9e8bf82568c2a59309/5a46d/20191109112844.png\"\n        srcset=\"/static/4ffb676ad07aef9e8bf82568c2a59309/1db73/20191109112844.png 75w,\n/static/4ffb676ad07aef9e8bf82568c2a59309/8a4e8/20191109112844.png 150w,\n/static/4ffb676ad07aef9e8bf82568c2a59309/5a46d/20191109112844.png 300w,\n/static/4ffb676ad07aef9e8bf82568c2a59309/1efb2/20191109112844.png 370w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">20191109112844</figcaption>\n  </figure></p>\n<p>次に、Password を聞かれるので、<strong>secret</strong> を入力して、「Log On」を押下します。<br>\n<figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABv0lEQVQoz3WQS2sTURiGZ++toH9BcOmuGykuCl5Q8D+4T8QLCjFJKVRdqBSKC135CyrtIkrAhdosYk1iNKmZJHQyucxMZjL3XNom8ngmFncuHr73fLw853CkM2mZk6lfnEpH1DiRrHFa7KSH4pySWRB5YaXO2dU65wTS/T2keBXpzn+4u9XmyQebZxmXtcyAdEYnkenwYLvD40yXpCBxPFPvu9wT/di7NnFBbFMVWZ3P+PFO0noaLz6v8CgXY20nQX7vIxxMmI5cjkYeh0NXZH+ex4GH70W4hIHPaBj+IwwCZmMf6VtNZmn9Mou3L3F19QYb2VdMwkNM22ZgO5S+l/m6W6BaqaBoFj9khd1imUbHZHgE3nhGePCbnj/FGLhIBSG89nSZW/HrLCeXeLn1XNw0w3ZsXPEaT2DaLprlYTghqhmg9kUeeOiWg+UGmI6PZjo4rhBWZJWb61dYfHuBixvnebP9mulk+lcoCoHvkW/0+VSU2czmyOZK5KptKvsarWad3M4XioUCLaWF4zhIqmGjKxrdekQP07DwhCSSRUR/1ujZlJsa+eo+pXqHn0qftm5h6BrNZhNFyHTDmPf/ALSkyUQMbpSGAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"20191109113012\"\n        title=\"20191109113012\"\n        src=\"/static/18419618c5457aff9a9e37957f3a23db/5a46d/20191109113012.png\"\n        srcset=\"/static/18419618c5457aff9a9e37957f3a23db/1db73/20191109113012.png 75w,\n/static/18419618c5457aff9a9e37957f3a23db/8a4e8/20191109113012.png 150w,\n/static/18419618c5457aff9a9e37957f3a23db/5a46d/20191109113012.png 300w,\n/static/18419618c5457aff9a9e37957f3a23db/6c115/20191109113012.png 353w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">20191109113012</figcaption>\n  </figure></p>\n<p>無事、Selenium Server のコンテナに接続することができました。<br>\n<figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 80%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAABBElEQVQ4y2MI7d7wP6h/73+/zh3/wzq2/Y+ctP9/5MR9ROOoSfv+hwL1+3ftBOtlEOLh/C/AzfpfhIf1vxg3y39xPnaSsRgv239hoBmiQJqBgYERRFARMzFTZAAjI7qDGAkbyMTEBMbEWULAQEwXUGggCFtaWv6vqan5HxYWBncx2Qampqb+T0tL+5+UlPS/tbWVPBfCXODs7Px/27ZtcPGysrL//Pz85HkZFnahoaH/i4uL/1dXV/9vbm4mIlyJCEMNDY3/KSkp/318fCgPQ5rEMshQkKuIMpyJmRWskBGkAYqZKMAM1M3HQKxlaPZf28Dkv44RkDY0/a9nbP7fwMySbAwA/wKEXYTjJv8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"20191109113142\"\n        title=\"20191109113142\"\n        src=\"/static/8a1af7345fc13e54359ea7f4c9c8e8e7/5a46d/20191109113142.png\"\n        srcset=\"/static/8a1af7345fc13e54359ea7f4c9c8e8e7/1db73/20191109113142.png 75w,\n/static/8a1af7345fc13e54359ea7f4c9c8e8e7/8a4e8/20191109113142.png 150w,\n/static/8a1af7345fc13e54359ea7f4c9c8e8e7/5a46d/20191109113142.png 300w,\n/static/8a1af7345fc13e54359ea7f4c9c8e8e7/fc2a6/20191109113142.png 450w,\n/static/8a1af7345fc13e54359ea7f4c9c8e8e7/0a47e/20191109113142.png 600w,\n/static/8a1af7345fc13e54359ea7f4c9c8e8e7/c1b63/20191109113142.png 1200w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">20191109113142</figcaption>\n  </figure></p>\n<p>画面内の適当な部分を右クリックすることで、アプリケーションメニューが開き、Chromeがインストールされていて、実行できることを確認できます。<br>\n<figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 80%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACz0lEQVQ4y42RyU9TURSH2yIoEWkpFI0JEmMkgFVBkThrNGyM0UjiAjBOuDMx0b/AtS6M6MYxujAaXZlIgjFWURQRZCqUuS30dVBLy9SB9tXPywMEBIWT/HLuve93vvvOuapTFVWU3aml5PZHzt2qpvxBHeX3v1B+b74u3K/j/N1aSiveUXLTpKi0wsTJG285fu01JeJcVV/zjlGfB69kY8QzgNvew0/JyqCrn0G3Q0hS1l6nDZ97AEtjHbnr15KaqGGNdgWrk5eTviqB1JXxGERWVb5vJByJMugfwjc8htc/jH94lKHRID6fG79Pwj8yxkggiPwL+mz96PRpqFSqhfWsqoGYHCAyHiIqy8RiMWSRZVEdDX0nGnSKdYxIJMJEOBwO0tPTlWKNRjMf2GFpYzpkAQsGQwRDYULhcYLhqFhHCYfDfzySJGEwGJRitVo9H2hu78Dj8VBd/YH6+gba28y0tXzDYm7GYeumtaWJrq5umpqbcbs9Qm7S/gdsMbeLdsfp7bPickpYHT8wNQ7wqdXBR7ObJoudQa9XtCoRCARwuVz/BzY1tzI72pwyl56OcPXlGBefDGPqjM75Lgnw9AwXBFo6u1lKTD+K1WknSZ/8b2Dl8xf03LxOX08PNrsdq9WGzTYpu9j39vYSCoUmHy0q8+pNFUm6VX9eeQI6B5ys1aFLTESnEzklReQZpYi9VqslMzOT4uJiysrKFv6ruVItZiAhIUEBG9LS0Ov14oJ1ZGdnk5OTQ1ZWFhkZGTN+tWYZ6ql5/K24uDjFdPbMad6b3lL7uYavdbU8fvSQw4cOUnziGMeOHmHf3j0zQE1c/CRgYh5T0kxpWXy8Yrp8+Yoyw47OToqKijAajfO6mK5ZUsup+hQO7N9PrmhxUX9ufiGb8gowbhM5fwebtxeSt2Mn+YW7ySvcpWRjfgEbcoxszN0iznaztWAnW2d5Zus3r5LL+XHxw4kAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"20191109113313\"\n        title=\"20191109113313\"\n        src=\"/static/5b422ac7263063f54227a2c03f25a2f1/5a46d/20191109113313.png\"\n        srcset=\"/static/5b422ac7263063f54227a2c03f25a2f1/1db73/20191109113313.png 75w,\n/static/5b422ac7263063f54227a2c03f25a2f1/8a4e8/20191109113313.png 150w,\n/static/5b422ac7263063f54227a2c03f25a2f1/5a46d/20191109113313.png 300w,\n/static/5b422ac7263063f54227a2c03f25a2f1/fc2a6/20191109113313.png 450w,\n/static/5b422ac7263063f54227a2c03f25a2f1/0a47e/20191109113313.png 600w,\n/static/5b422ac7263063f54227a2c03f25a2f1/c1b63/20191109113313.png 1200w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">20191109113313</figcaption>\n  </figure></p>\n<p>コンテナに接続できたら、そのまま置いておきます。</p>\n<h1>WSL (Client) の準備</h1>\n<p>WSL のインストールについては例によって割愛します。</p>\n<h2>Python のインストール</h2>\n<p>Python をインストールします（ない場合）。<br>\n今回は WSL の環境として Ubuntu を使用しているので、<strong>apt</strong> を使用しています。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ sudo apt install python3 pip3</code></pre></div>\n<h2>selenium モジュールのインストール</h2>\n<p>Python から Selenium を使用するために、モジュールをインストールします。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ pip3 install selenium</code></pre></div>\n<h2>テストスクリプトの準備</h2>\n<p>WSL 上で、スクリプトを作成します。<br>\n直接 WSL Terminal から vim などで作成しても良いですが、\n今回は、Visual Studio Code の Remote Development 機能を使用して作成を行いました。</p>\n<p>Visual Studio Code の Remote Development については、検索するとたくさん出てくるかと思います。<br>\n以下に、 Microsoft 公式ドキュメントを貼っておきます。\n<a href=\"https://code.visualstudio.com/docs/remote/wsl\">https://code.visualstudio.com/docs/remote/wsl</a></p>\n<p>適当なスクリプトを作成し、以下を入力してください。</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> time\n<span class=\"token keyword\">from</span> selenium <span class=\"token keyword\">import</span> webdriver\n<span class=\"token keyword\">from</span> selenium<span class=\"token punctuation\">.</span>webdriver<span class=\"token punctuation\">.</span>common<span class=\"token punctuation\">.</span>desired_capabilities <span class=\"token keyword\">import</span> DesiredCapabilities\n\ndriver <span class=\"token operator\">=</span> webdriver<span class=\"token punctuation\">.</span>Remote<span class=\"token punctuation\">(</span>\n   command_executor<span class=\"token operator\">=</span><span class=\"token string\">'http://localhost:4444/wd/hub'</span><span class=\"token punctuation\">,</span>\n   desired_capabilities<span class=\"token operator\">=</span>DesiredCapabilities<span class=\"token punctuation\">.</span>CHROME<span class=\"token punctuation\">)</span>\ndriver<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'https://www.google.com/'</span><span class=\"token punctuation\">)</span>\ntime<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\nsearch_box <span class=\"token operator\">=</span> driver<span class=\"token punctuation\">.</span>find_element_by_name<span class=\"token punctuation\">(</span><span class=\"token string\">\"q\"</span><span class=\"token punctuation\">)</span>\nsearch_box<span class=\"token punctuation\">.</span>send_keys<span class=\"token punctuation\">(</span><span class=\"token string\">'ChromeDriver'</span><span class=\"token punctuation\">)</span>\nsearch_box<span class=\"token punctuation\">.</span>submit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\ntime<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\ndriver<span class=\"token punctuation\">.</span>quit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAABuUlEQVQ4y41Sy5KbMBDkL9ZxQGBAvAIIIYFkUxUOu1U55v+/pjMjr53KJmvn0DWSZqY13VJkLt+xLAvmecaoFJSaoGmttQ4YxxHDMNC5ohoDYwymSYezYRjfcc1zb7QuFlXToO966HFCT0kpGxRFgex0ghACIhFIkuQDxD2maYq27ahPIrLWUmOGTrbw1sE5Bz1MYQpDubbr0NCFHcWqqtCUNeqqDvu+70PuRBeXpSTSliZcV2RZRgclGrrlWz+gJ5mKUMkSBRVLmrYqC5RFjizNrqAhmIh7WcXxeERd10zoKJGhoo3b3+D3V8x+gyNfL1ZjWwwWrWDUCGcNBMn7KJ8J4zhGTdNG3nvkeU4SJ+z7Du9WmEnBEom3c4gsjRUwWfD0H2BClh885NH5NbeNJvMO1i7kU4VaFoQSOeXZePHXw/w5YSDk5+YJ2eTrl1D3wvgdt6bPwJfdCVnqzdjkP5ofSeZfEPHnvZHdkskn0p6Be6OJCNPsanYqOD5H+gCRGcmzlyO+Hg44xC/4khyeI77Whvqw/t0brT9/oNwXNPTvnNyg0xVaPIbNPdbygoVgizPFM1ZJ6/yMX9QldMUOKfuAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Remote Development を使用すると左下に「WSL: Ubuntu-18.04」などと記載されます\"\n        title=\"Remote Development を使用すると左下に「WSL: Ubuntu-18.04」などと記載されます\"\n        src=\"/static/dfec0a494b4646e4f3ce0063bc518398/5a46d/20191109112151.png\"\n        srcset=\"/static/dfec0a494b4646e4f3ce0063bc518398/1db73/20191109112151.png 75w,\n/static/dfec0a494b4646e4f3ce0063bc518398/8a4e8/20191109112151.png 150w,\n/static/dfec0a494b4646e4f3ce0063bc518398/5a46d/20191109112151.png 300w,\n/static/dfec0a494b4646e4f3ce0063bc518398/fc2a6/20191109112151.png 450w,\n/static/dfec0a494b4646e4f3ce0063bc518398/0a47e/20191109112151.png 600w,\n/static/dfec0a494b4646e4f3ce0063bc518398/2bef9/20191109112151.png 1024w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Remote Development を使用すると左下に「WSL: Ubuntu-18.04」などと記載されます</figcaption>\n  </figure></p>\n<p>5行目～7行目の</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">driver <span class=\"token operator\">=</span> webdriver<span class=\"token punctuation\">.</span>Remote<span class=\"token punctuation\">(</span>\n   command_executor<span class=\"token operator\">=</span><span class=\"token string\">'http://localhost:4444/wd/hub'</span><span class=\"token punctuation\">,</span>\n   desired_capabilities<span class=\"token operator\">=</span>DesiredCapabilities<span class=\"token punctuation\">.</span>CHROME<span class=\"token punctuation\">)</span></code></pre></div>\n<p>で、Selenium Server に接続する設定を指定します。</p>\n<ul>\n<li><strong>command_executor</strong> には、Selenium Server のIP、ポート、エンドポイントを指定</li>\n<li><strong>desired_capabilities</strong> には、スクレイピングを行う Web ブラウザの種類を指定</li>\n</ul>\n<p>このたりは、以下のサイトで詳しく見れます。\n<a href=\"https://selenium-python.readthedocs.io/getting-started.html#simple-usage\">https://selenium-python.readthedocs.io/getting-started.html#simple-usage</a></p>\n<h1>スクレイピングテスト</h1>\n<p>WSL 側でスクリプトを実行すると、コンテナ内で自動で Chrome が立ち上がって想定通りの動作をすることが確認できます。<br>\n<img src=\"20191109114954.png\" alt=\"クリックで拡大できます\"></p>\n<h1>まとめ</h1>\n<ul>\n<li>Selenium サーバーが Docker コンテナ側にあることで、特定のバージョンの Chrome でのテストなどがしやすく、別の環境に持っていくことも簡単になる</li>\n</ul>\n<h1>参考</h1>\n<p><a href=\"https://qiita.com/memakura/items/20a02161fa7e18d8a693\">https://qiita.com/memakura/items/20a02161fa7e18d8a693</a>\n<a href=\"https://qiita.com/yutachaos/items/4a1da5d55a3bf0df889e\">https://qiita.com/yutachaos/items/4a1da5d55a3bf0df889e</a>\n<a href=\"https://qiita.com/reflet/items/8f541edde58d635daac4\">https://qiita.com/reflet/items/8f541edde58d635daac4</a></p>","frontmatter":{"title":"Python (Client) + Selenium Server (Docker) で Web スクレイピング環境構築","date":"2019/11/09 12:06","tags":["Python","Selenium","Docker"]},"id":"73bf763c-d9dd-5aff-96bc-50ba16c3a317","excerpt":"はじめに この記事では、Windows 10 上の Docker で立ち上げた Selenium Server に対して、WSL (Windows Subsystem for Linux) 上で Python スクリプトを書いて Web…"},"relatedPosts":{"edges":[{"node":{"fields":{"slug":"/2020/0415/"},"frontmatter":{"title":"Docker + Jenkins で GatsbyJs ビルド環境作成","date":"2020/04/15 23:17","tags":["Docker","Jenkins","GatsbyJS","Node.js"]},"id":"9468aecc-ca75-59c6-a71c-cfd720dedc36"}},{"node":{"fields":{"slug":"/2019/1109/"},"frontmatter":{"title":"Python (Client) + Selenium Server (Docker) で Web スクレイピング環境構築","date":"2019/11/09 12:06","tags":["Python","Selenium","Docker"]},"id":"73bf763c-d9dd-5aff-96bc-50ba16c3a317"}},{"node":{"fields":{"slug":"/2019/1109/"},"frontmatter":{"title":"Python (Client) + Selenium Server (Docker) で Web スクレイピング環境構築","date":"2019/11/09 12:06","tags":["Python","Selenium","Docker"]},"id":"73bf763c-d9dd-5aff-96bc-50ba16c3a317"}},{"node":{"fields":{"slug":"/2019/1109/"},"frontmatter":{"title":"Python (Client) + Selenium Server (Docker) で Web スクレイピング環境構築","date":"2019/11/09 12:06","tags":["Python","Selenium","Docker"]},"id":"73bf763c-d9dd-5aff-96bc-50ba16c3a317"}}]}},"pageContext":{"slug":"/2019/1109/","tags":["Python","Selenium","Docker"]}}}