{"componentChunkName":"component---src-templates-blog-post-js","path":"/2019/0914/","result":{"data":{"site":{"siteMetadata":{"title":"なばろぐ","description":"プログラミング、ピアノ作曲・演奏、雑記など"}},"markdownRemark":{"html":"<div class=\"alert info\">\nはてなブログからの移行記事\n</div>\n<!-- more -->\n<p>Google Api の設定をして、Developツール上で情報が取得できるところまでの確認</p>\n<h1>API 準備</h1>\n<h2>Google Api Console ログイン</h2>\n<p><a href=\"https://console.developers.google.com/\">https://console.developers.google.com/</a></p>\n<h2>新規プロジェクトの作成</h2>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 82.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAACTUlEQVQ4y6VUW5LaMBD0IXOdnCAXyU8ukK98bahUal9gIAHCAgbjp2QZ28KvzoxUsFl2K7upqGpqNJI8mp5u2ZEiRayOkKFAHK6RRQkOhwNeG2EYIs9zVFWFsizP5og0hcxyKCEQBCGkkBRLk7QoCuNfsiRJIOgbKeUTc/zdDjvPQ0KJN2sPEd3s+3sI2uy6Dk3TvGi817btM3NOG13XGyg9xf8zHL7t1AchLNQsywwc9kplpldSCuOLg22DyhTF9myeWyvLCk6lG8hgCpn4GAwGxm5vboy57hDD4T3m8xmur7/DHU9wf3eHq6srTGg+cl0s5j8xGi8xni5tD7XWNElNJav1FssHD/sgxs6PEEXWUuoveyaC/Xa7ozmpI47Jx/CDDEGkqPLcJlRKUekKsweJ6S+BH8sUk0VKRNlDvM9wT95APq/l5GlOBWW0ZnqYUcAS4Sq1roikBm1To6lr1G80ztP3PfWQyFjM51gslth4W9poLds9zIHTuJz3PauhM/Lh+Hg8Yr/f2woNDGKM4TPjXPqB2DTMp6mBx+sFxQxP01wfW8i8NglP0uMzDmfnRDUl1pU2BGw2HsIgIumkWK1W5mZmkMXPD0GRVMqqRZDWz3XISBJia7VePYH12rCQe6qsM4+B5cdVOzlBGw1dTCZTYlqaA6en9fiKuj/sMraJI0E/GFXDARoUKiDa7cs4cI+Iaa728sO/GZVpqna+ujk+fPRxO7O/rEJ30HX3T/DPquAefvoS4d37MT5/i0l7RwRxgVgURouPEnm7/QbqAh6KqtYhuQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"プロジェクト名は好きなものを\"\n        title=\"プロジェクト名は好きなものを\"\n        src=\"/static/3f9119415fb70ace3ec08fbb6c2b19c0/5a46d/20190914120413.png\"\n        srcset=\"/static/3f9119415fb70ace3ec08fbb6c2b19c0/1db73/20190914120413.png 75w,\n/static/3f9119415fb70ace3ec08fbb6c2b19c0/8a4e8/20190914120413.png 150w,\n/static/3f9119415fb70ace3ec08fbb6c2b19c0/5a46d/20190914120413.png 300w,\n/static/3f9119415fb70ace3ec08fbb6c2b19c0/fc2a6/20190914120413.png 450w,\n/static/3f9119415fb70ace3ec08fbb6c2b19c0/10f9a/20190914120413.png 539w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">プロジェクト名は好きなものを</figcaption>\n  </figure></p>\n<h2>Fitness API 追加</h2>\n<p>左側メニューの「ライブラリ」または、ダッシュボードページ上部「APIとサービスを有効化」をクリックし、ライブラリへ。</p>\n<p>そこで、Firness と検索し、追加</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAAmElEQVQY032P2Q6DIBBF+f/f5EWsTMUFl2huPTQkpkklObksw2Fw0Xq9QlCfksKV8zxrmiala911nWKMMrOSv3BO7bZtGsex7DmEHNxFiL33apqgtm3/Qh2JDLjvEFWGYZBF07IsyjmXXNe15BPUAg6HtULrgMTsrX3fdZ6njuMoMH8a1BRh/S4iJFC7q53m/F3fH7jDPvc+h3iB2h5aCrYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"検索後\"\n        title=\"検索後\"\n        src=\"/static/7354dbb2ecb5b8fe41b85c531a8a56f5/5a46d/20190914120609.png\"\n        srcset=\"/static/7354dbb2ecb5b8fe41b85c531a8a56f5/1db73/20190914120609.png 75w,\n/static/7354dbb2ecb5b8fe41b85c531a8a56f5/8a4e8/20190914120609.png 150w,\n/static/7354dbb2ecb5b8fe41b85c531a8a56f5/5a46d/20190914120609.png 300w,\n/static/7354dbb2ecb5b8fe41b85c531a8a56f5/fc2a6/20190914120609.png 450w,\n/static/7354dbb2ecb5b8fe41b85c531a8a56f5/0a47e/20190914120609.png 600w,\n/static/7354dbb2ecb5b8fe41b85c531a8a56f5/000c7/20190914120609.png 1137w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">検索後</figcaption>\n  </figure></p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAABtklEQVQ4y51UC26rMBD0ld8teoje4N2nqtTmtSUkYP44GBswzNu1A0mjppVqabIYyHh3ZoTo+x7jOGIYBvC1UgrRfo99HCPLMlhr/f1raK2hz/X2mWCipmnQti0RT2ibGruXZ+QyQVVV6LoOp9NpA+/7O2QbYZqmvptpmlA3Ck+vKXZRgTwvkCRHZDKDpOdJmtA+2Ui/JOQfHssYCzca/Dso/HnM8PA3R1HWkERSFiWqrsWxlEgORz/RNvoNBJNZY4gwYNVse4m6Wcfz7/jDzV0I5xyuF0vABF+tZVnw0xLHJEdZa8zzhTAv8s0ENourUnStWp+IbwnLsvCasCG8uBZEyEbxn3m/gvcBAx0cosZYYzdTV6JVGnaYLiOTRu/vbz6HURRRJhkfvsbxgdKQb6mQmaQqQ5UhJaKqG+qo9ILyCYyuO31yrjchEmwY63gPfuR5dsQcRuObzs1EYNEx0dndazPW6wvRZ9PErahM2KqBDpjxmyVuW+ZuvSGDDTgbwRPYcwbZgGBSOHiaFl/n6w5XwnF0JHLjEcUUH9Kz1xT0Xvs0VFXtPyAsBWvdmwnaOKqOplvwH2BkPeuMl5jUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"有効にした状態\"\n        title=\"有効にした状態\"\n        src=\"/static/4c8f139989577680be90301b752bb623/5a46d/20190914120716.png\"\n        srcset=\"/static/4c8f139989577680be90301b752bb623/1db73/20190914120716.png 75w,\n/static/4c8f139989577680be90301b752bb623/8a4e8/20190914120716.png 150w,\n/static/4c8f139989577680be90301b752bb623/5a46d/20190914120716.png 300w,\n/static/4c8f139989577680be90301b752bb623/fc2a6/20190914120716.png 450w,\n/static/4c8f139989577680be90301b752bb623/0a47e/20190914120716.png 600w,\n/static/4c8f139989577680be90301b752bb623/94829/20190914120716.png 878w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">有効にした状態</figcaption>\n  </figure></p>\n<h2>OAuth 同意画面、認証情報追加</h2>\n<p>ユーザー（自分）に許可を出すための画面設定が必要。<br>\nAPIとサービス画面の、「OAuth同意画面」から、アプリ名のみをとりあえず設定。</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABOklEQVQoz22SjWqEMBCEff9XLBwc1FOvMZqYP4063QnVCp4yhMTNtzu7Vt57UNM0wU0O8zyfuj77voPvuq5F27bdtO8bqgJyDtZaAQcsy1JgOedy1jQN6voF1fdQSuHxeKBtWxhjTmmt0ateEgkwBKnQTRgHjbwkAS0CnbEKcJJzQihe7NquAL/rupzRWYzxXOmi0ibiRzs86wGNSjBuLgopS1ZVstPKzb7o01P1JkENCa93wNdzhLYzrM/wMUMXmz2cd2cFV9Cxv55XgcFi2zkrFb0xWVN6ysbTJvvFXrLX67beIMdAGF8shxCQYhKIxzga0VjWLAGEaD2AMYTyEgfGarmmlP6m+191xake4mSpYx9jwDAM6LquVMoE3DMpB3EkIZBueKe6/ndX8eNh5RCTrdvnAUVxwZhf1BC7qFSnLuUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"設定画面\"\n        title=\"設定画面\"\n        src=\"/static/0a8dd2a33f7f9c7708bcdebd4eeee052/5a46d/20190914121004.png\"\n        srcset=\"/static/0a8dd2a33f7f9c7708bcdebd4eeee052/1db73/20190914121004.png 75w,\n/static/0a8dd2a33f7f9c7708bcdebd4eeee052/8a4e8/20190914121004.png 150w,\n/static/0a8dd2a33f7f9c7708bcdebd4eeee052/5a46d/20190914121004.png 300w,\n/static/0a8dd2a33f7f9c7708bcdebd4eeee052/fc2a6/20190914121004.png 450w,\n/static/0a8dd2a33f7f9c7708bcdebd4eeee052/0a47e/20190914121004.png 600w,\n/static/0a8dd2a33f7f9c7708bcdebd4eeee052/d54e4/20190914121004.png 747w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">設定画面</figcaption>\n  </figure></p>\n<p>設定したら保存してください。</p>\n<p>次に、認証情報を追加。<br>\n「認証情報」をクリックし、「認証情報を作成」をクリック。<br>\n「OAuth クライアントID」を選択。</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABZ0lEQVQoz4VSy26DQAzk/78ovVXqKTnl1msT0RDCY2HZNwtT2xEoqioVaWS82h3P2C6u1yuUUoJxHAUxRszzDNXd8bhdAKzgb13Xf1FY62CsxTRNMJMRshACESacPjXezwMOpxZlbYkxY1mWP8FkHAtrJjjLZCOC90KUUkTOMz7ODd6ONQ7HDl83jTyT8pxFfSbML0gpSSyawaNqHSlw0HbGaBLUFGF9wpIsglWkLMAZDU8F2YElRwzvnJwxuFWO8qLXEXVncfke8GhHIo1EGuFDoksat1uF6l6jbVsYYwTcEnYzDMNOyIX4K4J3ZNlgUB3uVSVWs9hOUpF7q7WmaCTnx0waQ5RcqWEvsvBQjHnKZzUNqWDpfMb92AjbpqF/v/eLm5+pl9s2cL5tQcGPmJ2rsJInoXmuDa1SXdcoy1Ji3/dikwXw3YYK8X1+v21HwdY2/J7YVkST+klPcs5qZMo570pfp/0Dzhy4H2liguMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"20190914121124\"\n        title=\"20190914121124\"\n        src=\"/static/64e83ac3cc42ac6b926fbe8e3f767771/5a46d/20190914121124.png\"\n        srcset=\"/static/64e83ac3cc42ac6b926fbe8e3f767771/1db73/20190914121124.png 75w,\n/static/64e83ac3cc42ac6b926fbe8e3f767771/8a4e8/20190914121124.png 150w,\n/static/64e83ac3cc42ac6b926fbe8e3f767771/5a46d/20190914121124.png 300w,\n/static/64e83ac3cc42ac6b926fbe8e3f767771/fc2a6/20190914121124.png 450w,\n/static/64e83ac3cc42ac6b926fbe8e3f767771/0a47e/20190914121124.png 600w,\n/static/64e83ac3cc42ac6b926fbe8e3f767771/41d3b/20190914121124.png 774w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">20190914121124</figcaption>\n  </figure></p>\n<p>「ウェブアプリケーション」を選択し、\n「承認済みのJavaScript生成元」には</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">https://developers.google.com</code></pre></div>\n<p>を、「承認済みのリダイレクトURI」には</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">https://developers.google.com/oauthplayground</code></pre></div>\n<p>を設定してください。このあたりはドキュメント通りです。</p>\n<p><a href=\"https://developers.google.com/fit/rest/v1/get-started?hl=ja\">https://developers.google.com/fit/rest/v1/get-started?hl=ja</a></p>\n<h2>OAuth 2.0 Playground で動作準備</h2>\n<p>Google Developers OAuth 2.0 Playground 上で実行してみます。<br>\nGoogle API のテスト環境のような形でしょうか。</p>\n<p><a href=\"https://developers.google.com/oauthplayground/?hl=ja\">https://developers.google.com/oauthplayground/?hl=ja</a></p>\n<p>下記は OAuth 2.0 Playground についての記事\n<a href=\"https://developers.google.com/identity/protocols/OAuth2\">https://developers.google.com/identity/protocols/OAuth2</a></p>\n<p>アクセスしたら、「Step1 Select &#x26; authorize APIs」で「Fitness v1」を探してクリックで展開、<br>\nいろいろ試してみたいので、全てのエンドポイント？にチェックを入れて、「Authorize APIs」をクリック。</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 137.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAAAsSAAALEgHS3X78AAADR0lEQVRIx41VS8/TMBDsD4YDN/4OiAN/hCsSXEEc+srLsZ1H826Xnd3YTaj0iUpu4sSezOzsrg+3pqTjn19UGEfOWZqmmf7393g8dtdlWegwTgPZtqEiL6goCvLeU1VVZK2lpq6p4uGco7IsqeZ7z++wpr3dItgO8L7caZkmYQcgbDLGCDjmGAArSyNADoPXtm37wlQA53mmvu8pTRMeGeVZTpfLhY7Hk9xnPJIkoev1yu9TSnme57l8ZBgGwv7wE0D84UVR6CLIA7ssy+TeWscAmKcSBmFrSrliTVXVEfB+vyvgOI4iI8RPJRuqV8kAtQzgfcXrvIDhua88dV0XwaA0Ss7zTJgYZgf55/NFgA0DIxR4hveQa0whz6AErPGbxAenDPuhFyCRbFVyynJ8kIwQpBvJPIp1/RYQCqNka0uRU/FDLBaXEQKWWfImlewFAB+t60bkIv47hkEygg5Hi1xdPZ3PwhoyE2YHlyFX5acvBbCTjK8gLvg6WCB2AJK8c14MQozVdSvXcZx2ObgDhGSNhxMQsARb73x0FR8JFYMr5iGmt5s6DZyN5Ewls0xIPm8kQ2KSqGRZw2qSKxcCr4NZKM+XxC7BgBnCCNyDgeQam2LgKoOFMgRDDMgEIWDsSu8pGQ5aYQIjwkbNR46xVJGJbv/729RyJy6jdjWxU6nnUDGpuKxz3BujeYjqeGkOasrwzMO1dWFzHbuNzptGW1ktLc0L4Ev7Ci4jbbARkmEQmOAezhfCNJfKKTcJ/qbk2L44fkji0+kUXb2yo5fLeU3sVNgmiV7xgdAbdwwhGY5CTsgvdGydO3G+aRp5h1BAeuhOoeNEhlopRoId+hxYWmkEdq3tPL6TtWuyWzkamj3Dbq1lJDGYPAGVKTpPgjlSKlvbVqmx1u5txRgFnBeambLzKgEStT0ZMWGbh6HOQz1LOSIEvAdGC2DXcr/jEsIxGtiFxhnSYXu6YYR0ucu9XiOg59z6/uMbGaaOSkCHDhUCE/D17Qn31k8A+66l39efZCsfj00A4YwJrsL9hVkta91iTByqzC+UOB2m1ucHAfGtHuIcI8+xxNm7lYYRmsDMQPSYGWSm9597+vClp3efevr4tadxftBfYBkR2ZbpkSAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"アルファベット順に並んでいます。Google Fit ではないので注意\"\n        title=\"アルファベット順に並んでいます。Google Fit ではないので注意\"\n        src=\"/static/13b8a9df959cca925bfc992c35ac31f8/5a46d/20190914121905.png\"\n        srcset=\"/static/13b8a9df959cca925bfc992c35ac31f8/1db73/20190914121905.png 75w,\n/static/13b8a9df959cca925bfc992c35ac31f8/8a4e8/20190914121905.png 150w,\n/static/13b8a9df959cca925bfc992c35ac31f8/5a46d/20190914121905.png 300w,\n/static/13b8a9df959cca925bfc992c35ac31f8/fc2a6/20190914121905.png 450w,\n/static/13b8a9df959cca925bfc992c35ac31f8/d024a/20190914121905.png 481w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">アルファベット順に並んでいます。Google Fit ではないので注意</figcaption>\n  </figure></p>\n<p>すると、どの Google アカウントで認証するかの、見たことある画面になりますので、アカウントを選択し、許可をクリック</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 97.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsSAAALEgHS3X78AAACsElEQVQ4y61U227bMAzt///L0B9ok24F2ocBHdChadfcnPh+lXy3ZcVnpJJ06YICG1ABJ6YV+pA6JHWhtYbqevS9Qtd1GIaB7B5KKex2u//GRd+1EFkCKXNEYYQizyGEQFVW4GDjOP4z2P9ioJ8dRuzGPbTmSKPBQLb+C8OZrQ04O0PIBvF9yjJH5ki8NrHGq68xczVWocaze4CnYSe0F2k8rBXm5DMPNJbk88sH7EAgy1LDYTI8EjpRhdkmx/eXDCuvxMot8LhIMLcFgqyBG9ewghoPrxI/5gLPlsDPlYDjxSjL8kBoMtTmJQ59bNZLvMwesZy/IKdCxb4NEQcoZIZcpFBNiTT0IJMQpUyR0n9hGKI4JTQanohob214QQRJbeNS5eO6hp8XyAcNQe2Vdgo+7a8tC0IW5xruCbGvMvcS2bUfwL28RH17i2IyQTm9MahuvqKeTlHd3UG1rflmpG+4Zc4I9+vwBx0pvfyC3bcb6OkV4RrD5ApqOoG6Jvv+/uMqc4SBOONyhCc1HWcA1QSCHIIB8BRABTWQFK/QAyRNlef5VF1hCsLT9YeQ0lWkz6tDusQDEWpsE4VYKkSETdTDCntqHYVM1ihoikqapiiKkJO2Usr3hDwRnOVONZ/T2EcNsxro+gE1VbWkOWbUdQPJFS5KlFVlLo+maVBVlfHjS6Rt93vjoaiGkF88MaJuWmy3W2wIQRDAcRw8Pc2wXK7oeDn1XATbdoyP47iI49hcJPx8R3hcrAU3qu/75Cjhuh7m8wUWi4UpQpKksDYbE4SJOOPT788IOQo78TGYnG0+VlVRMYri7a7kbI+996GGVUfXFVWbL1ZGS43LxEeteI8D8Dtrxs998NY83xFyNCseUdUtLBqp1WptNHRdl473ZDRM04xGTb5pduxBxqmGvwG/37kcjt7G6wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"上部\"\n        title=\"上部\"\n        src=\"/static/ff4eaf16e98ff936e2ea3d9d7a5573e9/5a46d/20190914122229.png\"\n        srcset=\"/static/ff4eaf16e98ff936e2ea3d9d7a5573e9/1db73/20190914122229.png 75w,\n/static/ff4eaf16e98ff936e2ea3d9d7a5573e9/8a4e8/20190914122229.png 150w,\n/static/ff4eaf16e98ff936e2ea3d9d7a5573e9/5a46d/20190914122229.png 300w,\n/static/ff4eaf16e98ff936e2ea3d9d7a5573e9/fc2a6/20190914122229.png 450w,\n/static/ff4eaf16e98ff936e2ea3d9d7a5573e9/69096/20190914122229.png 464w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">上部</figcaption>\n  </figure>\n<figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAAB3UlEQVQ4y6WTS47UMBCG504sOcfcgy07xIYlS47AigUSuznFaJDmQc900p3O247jvB/OT5WhM+nOgISwVHLs2H995d++MMZgmib8b2MNjouj4DiONvq+R9u26Lpu9c19Xdeoqmqe4z0rQW5RFOPm5jtcdwfP83A4+PD9AAffx9N2a7+DIMBm84j7hweEYUTjEFmW4QhlzEJQKWUFi6J4sZx/KplbnCRwiI4Jpcwos0Ke58i1thRaFzTWRBwgSVK4uz18IkxTYcteEbIg/2Qxzzsg4JIoWDiKE3h8BFQyl7rbe7i9u8ee1imVz3RmSViWFVIhoIhKSok0iVHonDYwrURGc0JIm6AoS4R05gzBlGwUN9aaBSWVxWU8Pm2JKMU+VHD8DBs3xA8ngFAlokTYzSzMhvD6reOiJNdXgrxI03lJouQrEWnASUcULZARAPdV06NpGivA5vGZDsMwi52Y0nYDusFgJEOrjl09Ojst4iV3nx1eCE4o2wmJNvDkgFu/R91NJ9fhPM4TmfOX8qe7daQ4HU9oB4YwNvFoVi5PKBqDvDYQpfldMhY0mCm47cSI1x8SXH4SePU+xserX49hGM2zIGfkYDHu/yaYFgZvv+R491XjzWeFb9eNnWfSn2rDOZCsxv0TAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"（長いので中略）下部\"\n        title=\"（長いので中略）下部\"\n        src=\"/static/9500d1785477bfadbb106d038fe17d3e/5a46d/20190914122042.png\"\n        srcset=\"/static/9500d1785477bfadbb106d038fe17d3e/1db73/20190914122042.png 75w,\n/static/9500d1785477bfadbb106d038fe17d3e/8a4e8/20190914122042.png 150w,\n/static/9500d1785477bfadbb106d038fe17d3e/5a46d/20190914122042.png 300w,\n/static/9500d1785477bfadbb106d038fe17d3e/fc2a6/20190914122042.png 450w,\n/static/9500d1785477bfadbb106d038fe17d3e/4ee7f/20190914122042.png 486w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">（長いので中略）下部</figcaption>\n  </figure></p>\n<p>すると、前の画面に戻ってAuthorization code が入力された状態になりますので、<br>\n「Exchange authorization code for tokens」をクリック。  </p>\n<p>Authorization code は一時的なアクセス許可をするための橋渡しのような状態で、\nこれを利用することで、Refresh token と Access token に変換することができます。</p>\n<p>▽参考\n<a href=\"https://developers.google.com/identity/protocols/OAuth2\">https://developers.google.com/identity/protocols/OAuth2</a></p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACVklEQVQoz4VTTW8SURTlX+rGhUYbqzHWxK+lm/6RRmPbBQ0aKdC0JlVoWRSmCgNloMAwIMw3M/OGoQMc73uDC43Gl5zcD9493HvfmZTrOOj1utCGQ6j9PvqEIfndbheK0kaPx5omctpgIH4fTybka8IfkO102qjV6pTXkTINHZJURVWSUK1KuGo2cSldoiHLkCoVyHRRrtVEvkm52rfvaLdaaNTruO500O8RqdqHctWCbhhIhSGD67rwPE/AdR0Y0ynsaA4nigSscAYjCGAyJnxuTRYiBBATbggLwnw+54QhpkTAEVARo4K41URc+oKb8hni8xJisgvu/4GoVAIrFsFOTxHSVCsiTXES27ZhmSam7hQuETvlC0zSWYwzeUIOkw8FQh6TTAJ9Hfu5AsJCAUE2i1m5nBDiL+fNMfDkI/D6CHieA17mgRdktz5RfAi8ovydfeBklNxfrutWqxVS0WwGRjvhmNG4Eb3cxUkDX3Myzo9klAoyztYo5tfxcROfDxtQKwqWHQVzevXFYpEQ8gcx6HVMGtmxbNjb2/A3H4A9e4zg6aPfwLZ4bhNs4y6ih/fgbdyHees22M6OGHe1XCY7tCwLluPCJ2KWTsN7vwtvbz/B7h58slOyztt38A8ysHUDresuVNKgqnEddkRD/KQikoVPcvF9Hx5165PeAtKbT/BIazzmNlIUxFQY93rga+L3GTXDG+L+jHKCkGuPfwlC+aoKTdcF1PEYI7Im7ac/+gGLiv53xA4ZC+CQbLigHTuBbSUyCunPFuMR/PWe5zTNr8J/4Sfgo2U28f0NPAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"色々情報が出てきたらOKです\"\n        title=\"色々情報が出てきたらOKです\"\n        src=\"/static/d02a3ed9951f59428f1ed4118cbff6ff/5a46d/20190914122627.png\"\n        srcset=\"/static/d02a3ed9951f59428f1ed4118cbff6ff/1db73/20190914122627.png 75w,\n/static/d02a3ed9951f59428f1ed4118cbff6ff/8a4e8/20190914122627.png 150w,\n/static/d02a3ed9951f59428f1ed4118cbff6ff/5a46d/20190914122627.png 300w,\n/static/d02a3ed9951f59428f1ed4118cbff6ff/fc2a6/20190914122627.png 450w,\n/static/d02a3ed9951f59428f1ed4118cbff6ff/13566/20190914122627.png 491w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">色々情報が出てきたらOKです</figcaption>\n  </figure></p>\n<p>アクセストークンは1時間期限なので（カウントダウンされてますね）、<br>\n期限が切れたら Refresh token を利用してアクセストークンを再取得する必要があります。</p>\n<p>この Playground ではAuto Refresh できるみたいなので、チェック入れておきましょう。</p>\n<h1>動作確認</h1>\n<p>使用できるAPIについては、Google Fit REST API のドキュメントに記載されています。</p>\n<p><a href=\"https://developers.google.com/fit/rest/v1/reference/\">https://developers.google.com/fit/rest/v1/reference/</a></p>\n<p>体重を取ってみましょう。</p>\n<p>使用できる dataSources (運動だったり、血圧だったり、体重だったり、睡眠だったり)は、</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">https://www.googleapis.com/fitness/v1/users/me/dataSources</code></pre></div>\n<p>にGETをすることで取得できます。</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABR0lEQVQoz4WSUW+EIBCE/f8/relTk17at0bt3SkooKiAwHSX61166YObfCEhMjuza9V1He70fQ+lFDSjNew8IxiNTQ1wRiHnfEh1uVxwPp/BJyOEwDAMRXBZFrjgIIzE4hakFMF1KNjUDeq6Rtu2kFIW+q7HTA5zTrDrXNjjjqOqlNLkShZXUt7creta3MUY4fyGb0GNtIAgJLll4ZQSIjnm805xuFMUzw7IDcdkWJDhjza3ohs7TKul2LZE5zH44Mv5lyL43gSc2oCJBNU4wjmHfd+LOy5+OJArq6/IEceRXz4UXj8VJEXlhRhjYK3FNE1FnBdhrMEovujujZ6k36f5Sei2FBJE8mDYFRNCKHjvySVF9muZobaUYDrRchqa4faYW4w8mu0hWuV/vZ6LZ9gr+j8nWpaLhKC7jmZGTYnN9WRkfAj+AMfWusvar6CkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"レスポンスの weight にハイライト\"\n        title=\"レスポンスの weight にハイライト\"\n        src=\"/static/154ef4b90241f3d6cf979b41600f6ead/5a46d/20190914123052.png\"\n        srcset=\"/static/154ef4b90241f3d6cf979b41600f6ead/1db73/20190914123052.png 75w,\n/static/154ef4b90241f3d6cf979b41600f6ead/8a4e8/20190914123052.png 150w,\n/static/154ef4b90241f3d6cf979b41600f6ead/5a46d/20190914123052.png 300w,\n/static/154ef4b90241f3d6cf979b41600f6ead/fc2a6/20190914123052.png 450w,\n/static/154ef4b90241f3d6cf979b41600f6ead/0a47e/20190914123052.png 600w,\n/static/154ef4b90241f3d6cf979b41600f6ead/c1b63/20190914123052.png 1200w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">レスポンスの weight にハイライト</figcaption>\n  </figure></p>\n<p>体重の部分のJSONを観ると、「dataStreamId」というのがあります。これが Google Fit API でのデータ種別IDになります。</p>\n<p>最後に、この dataStreamId を使って、過去の体重保存結果を取得しましょう。<br>\nテンプレートは以下</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">https://www.googleapis.com/fitness/v1/users/{user}/dataSources/{dataSourceId}/datasets/{start-end}</code></pre></div>\n<p><em>{user_id}</em> は <em>me</em> 、 <em>dataSourceId</em> は先程の dataStreamId、datasets の <em>{start-end}</em> は、取りたい期間を <em>ナノ秒</em> で指定する必要があります。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">GET https://www.googleapis.com/fitness/v1/users/me/dataSources/derived:com.google.weight:com.google.android.gms:merge_weight/datasets/0-1568432908000000000</code></pre></div>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABX0lEQVQoz32R207DMBBE8/9/xhMSL0B5oE3a3HyLc7WdOIN3S5AQohuNbCXZo5ndrK5rkJqmYWmtYYxB13XorYWtK0xSYJQS4zjCOYdlWVgxRuz7/ktZWZYoywp0VlWFtm0hUzMBCfx5PuOS53g/nVDkBX8fhxHTNDGQ6g8wTw35Jcf1eoUQMkmgTW77vofSEo1o0FkD7z2Lm9NDwMPlUZnWBiI5IjfkjCIfkbZtg7QCjWkg0lm0BXSv4IKD83f54H+A7HDzE/wyYBgGWJpZZzHPM0fa1i01LSjlDf1kITqRgBr/FQNfLgFvt8AwpRQPfV1Xdkc/hNXDDMm1m7HF+zuKSfdDkbTf55k9vWo8fxiGUWQC0zZpft55zG5KDkvITiJvcr5z5G9RZBKBGYjogRjYFSmEwKLhxy1yU60qjPOQNGLx8+PIOx6XT0BlFYa5Z+CUHNMyljRb0rEcGhHVF3Lzt8E36UJpAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"実行結果\"\n        title=\"実行結果\"\n        src=\"/static/e62a3a53f24fc49b01f9c62229d0b7bc/5a46d/20190914125223.png\"\n        srcset=\"/static/e62a3a53f24fc49b01f9c62229d0b7bc/1db73/20190914125223.png 75w,\n/static/e62a3a53f24fc49b01f9c62229d0b7bc/8a4e8/20190914125223.png 150w,\n/static/e62a3a53f24fc49b01f9c62229d0b7bc/5a46d/20190914125223.png 300w,\n/static/e62a3a53f24fc49b01f9c62229d0b7bc/fc2a6/20190914125223.png 450w,\n/static/e62a3a53f24fc49b01f9c62229d0b7bc/0a47e/20190914125223.png 600w,\n/static/e62a3a53f24fc49b01f9c62229d0b7bc/c1b63/20190914125223.png 1200w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">実行結果</figcaption>\n  </figure></p>\n<p>無事に取れていそうですね。<br>\nもちろんですが、過去に値を追加したことがなければ値は帰ってこないと思います。</p>\n<p>それにしても、なぜナノ秒・・・？</p>\n<h1>最後に</h1>\n<p>APIドキュメントを読めば簡単にPOST もできそうですが、自分用メモとしてまた記事を作るかもしれません。</p>","frontmatter":{"title":"Google Fit API & OAuth 2.0 Playground を試して体重を取ってみる","date":"2019/09/14 12:56","tags":["Google"]},"id":"0992e49c-1abc-58fa-9673-53606796b195","excerpt":"Google Api の設定をして、Developツール上で情報が取得できるところまでの確認 API 準備 Google Api Console ログイン https://console.developers.google.com/ 新規プロジェクトの作成  Fitness…"},"relatedPosts":{"edges":[{"node":{"fields":{"slug":"/2019/0914/"},"frontmatter":{"title":"Google Fit API & OAuth 2.0 Playground を試して体重を取ってみる","date":"2019/09/14 12:56","tags":["Google"]},"id":"0992e49c-1abc-58fa-9673-53606796b195"}}]}},"pageContext":{"slug":"/2019/0914/","tags":["Google"]}}}